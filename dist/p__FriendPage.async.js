(self.webpackChunk=self.webpackChunk||[]).push([[562],{88935:function(U,T,e){"use strict";e.r(T),e.d(T,{default:function(){return f}});var _=e(25359),l=e.n(_),R=e(49811),y=e.n(R),E=e(54306),g=e.n(E),I=e(22190),w=e(93236),r=e(88477),h=e.n(r),n=e(62086);function v(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{defaultAge:21},b=D.defaultAge,C=(0,w.useState)(""),a=g()(C,2),i=a[0],s=a[1],j=(0,w.useState)(b),c=g()(j,2),p=c[0],u=c[1],m=(0,w.useState)(""),M=g()(m,2),o=M[0],L=M[1];function t(){return B.apply(this,arguments)}function B(){return B=y()(l()().mark(function A(){var P;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,I.db.friends.add({name:i,age:p});case 3:P=d.sent,L("Friend ".concat(i," successfully added. Got id ").concat(P)),s(""),u(b),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(0),L("Failed to add ".concat(i,": ").concat(d.t0));case 12:case"end":return d.stop()}},A,null,[[0,9]])})),B.apply(this,arguments)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:o}),"Name:",(0,n.jsx)("input",{type:"text",value:i,onChange:function(P){return s(P.target.value)}}),"Age:",(0,n.jsx)("input",{type:"number",value:p,onChange:function(P){return u(Number(P.target.value))}}),(0,n.jsx)("button",{onClick:t,children:"add-btn"}),(0,n.jsx)("button",{onClick:y()(l()().mark(function A(){var P;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,I.db.friends.get("a");case 2:P=d.sent,console.log(666,P);case 4:case"end":return d.stop()}},A)})),children:"test-btn"})]})}function O(D){var b=D.minAge,C=b===void 0?0:b,a=D.maxAge,i=a===void 0?200:a,s=(0,r.useLiveQuery)(y()(l()().mark(function j(){var c;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,I.db.friends.where("age").between(C,i).toArray();case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},j)})),[C,i]);return(0,n.jsx)("ul",{children:s==null?void 0:s.map(function(j){return(0,n.jsxs)("li",{children:[j.name,", ",j.age]},j.name)})})}function f(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:"My simple Dexie app"}),(0,n.jsx)("h2",{children:"Add Friend"}),(0,n.jsx)(v,{defaultAge:21}),(0,n.jsx)("h2",{children:"Friend List"}),(0,n.jsx)(O,{minAge:18,maxAge:65})]})}},22190:function(U,T,e){"use strict";e.d(T,{C:function(){return j},db:function(){return s}});var _=e(25359),l=e.n(_),R=e(49811),y=e.n(R),E=e(63466),g=e.n(E),I=e(21140),w=e.n(I),r=e(68608),h=e.n(r),n=e(58853),v=e.n(n),O=e(38888),f=e.n(O),D=e(52510),b=e.n(D),C=function(){function c(){w()(this,c)}return g()(c,null,[{key:"download",value:function(){var p=y()(l()().mark(function m(M){var o;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.fetch(M);case 3:return o=t.sent,t.next=6,o.blob();case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}},m,null,[[0,9]])}));function u(m){return p.apply(this,arguments)}return u}()}]),c}(),a=e(4635),i=function(c){v()(u,c);var p=f()(u);function u(){var m;return w()(this,u),m=p.call(this,"arthold"),b()(h()(m),"friends",void 0),b()(h()(m),"mjImage",void 0),m.version(4).stores({friends:"name, age",mjImage:"taskId"}),m}return g()(u)}(a.default),s=new i,j={mjImage:{add:function(){var c=y()(l()().mark(function u(m,M){var o;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.download(M);case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return",void 0);case 5:return t.next=7,s.mjImage.add({taskId:m,image:o});case 7:return t.abrupt("return",o);case 8:case"end":return t.stop()}},u)}));function p(u,m){return c.apply(this,arguments)}return p}(),findById:function(){var c=y()(l()().mark(function u(m){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.mjImage.get(m);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},u)}));function p(u){return c.apply(this,arguments)}return p}()}}},88477:function(U,T,e){(function(_,l){l(T,e(4635),e(93236))})(this,function(_,l,R){"use strict";function y(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var E=y(R);function g(r,h,n){var v,O;typeof r=="function"?(v=h||[],O=n):(v=[],O=h);var f=E.default.useRef({hasResult:!1,result:O,error:null}),D=E.default.useReducer(function(a){return a+1},0);D[0];var b=D[1],C=E.default.useMemo(function(){var a=typeof r=="function"?r():r;if(!a||typeof a.subscribe!="function")throw r===a?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!f.current.hasResult&&typeof window!="undefined"&&(typeof a.hasValue!="function"||a.hasValue()))if(typeof a.getValue=="function")f.current.result=a.getValue(),f.current.hasResult=!0;else{var i=a.subscribe(function(s){f.current.result=s,f.current.hasResult=!0});typeof i=="function"?i():i.unsubscribe()}return a},v);if(E.default.useDebugValue(f.current.result),E.default.useEffect(function(){var a=C.subscribe(function(i){var s=f.current;(s.error!==null||s.result!==i)&&(s.error=null,s.result=i,s.hasResult=!0,b())},function(i){var s=f.current;s.error!==i&&(s.error=i,b())});return typeof a=="function"?a:a.unsubscribe.bind(a)},v),f.current.error)throw f.current.error;return f.current.result}function I(r,h,n){return g(function(){return l.liveQuery(r)},h||[],n)}function w(r,h,n){if(!r)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var v;if(arguments.length>=3){if(!("transaction"in r))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof h!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!n||typeof n!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");v=r}else{if(r instanceof l.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof r.table=="function"&&typeof r.db=="object")v=r.db,n=r,h=r.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in v))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in v.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return g(function(){return v.cloud.permissions(n,h)},[n.realmId,n.owner,h])}_.useLiveQuery=I,_.useObservable=g,_.usePermissions=w,Object.defineProperty(_,"__esModule",{value:!0})})}}]);
